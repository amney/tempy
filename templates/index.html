<!doctype>
<html>
<head>
    <title>Tempy - handrolled brew temperature monitor</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='rickshaw.min.css') }}">
    <script src="{{ url_for('static', filename='vendor/d3.min.js') }}"></script>
    <script src="{{ url_for('static', filename='vendor/d3.layout.min.js') }}"></script>
    <script src="{{ url_for('static', filename='rickshaw.js') }}"></script>
</head>
<body>
    <h2>Tempy</h2>
    <p>Currently brewing an Irish Stout</p>


    <h3>Hour</h3>
    <div id="chart0"></div>
    <h3>Day</h3>
    <div id="chart1"></div>
    <h3>Week</h3>
    <div id="chart2"></div>
    <h3>Month</h3>
    <div id="chart3"></div>

    <script>

        var data0 = {{ results_hour|tojson|safe }};
        var data1 = {{ results_twenty_four_hours|tojson|safe }};
        var data2 = {{ results_one_week|tojson|safe }};
        var data3 = {{ results_four_weeks|tojson|safe }};

        {#    var unit = {};#}
        {#    unit.formatTime = function (d) {#}
        {#        return d.toUTCString().match(/(\d+:\d+):/)[1];#}
        {#    };#}
        {#    unit.formatter = function (d) {#}
        {#        return this.formatTime(d)#}
        {#    };#}
        {#    unit.name = "30 seconds";#}
        {#    unit.seconds = 30;#}
        var graph0 = new Rickshaw.Graph({
            element: document.querySelector("#chart0"),
            width: 580,
            height: 250,
            series: [
                {
                    color: 'steelblue',
                    data: data0,
                    name: 'Temperature'
                }
            ]
        });

        var axes0 = new Rickshaw.Graph.Axis.Time({ graph: graph0 });
        var yAxis0 = new Rickshaw.Graph.Axis.Y({ graph: graph0 });
        var hoverDetail = new Rickshaw.Graph.HoverDetail( { graph: graph0 } );


        graph0.render();

        var graph1 = new Rickshaw.Graph({
            element: document.querySelector("#chart1"),
            width: 580,
            height: 250,
            series: [
                {
                    color: 'steelblue',
                    data: data1,
                    name: 'Temperature'
                }
            ]
        });

        var axes1 = new Rickshaw.Graph.Axis.Time({ graph: graph1 });
        var yAxis1 = new Rickshaw.Graph.Axis.Y({ graph: graph1 });
        var hoverDetail1 = new Rickshaw.Graph.HoverDetail( { graph: graph1 } );

        graph1.render();

        var graph2 = new Rickshaw.Graph({
            element: document.querySelector("#chart2"),
            width: 580,
            height: 250,
            series: [
                {
                    color: 'steelblue',
                    data: data2,
                    name: 'Temperature'
                }
            ]
        });

        var axes2 = new Rickshaw.Graph.Axis.Time({ graph: graph2 });
        var yAxis2 = new Rickshaw.Graph.Axis.Y({ graph: graph2 });
        var hoverDetail2 = new Rickshaw.Graph.HoverDetail( { graph: graph2 } );

        graph2.render();

        var graph3 = new Rickshaw.Graph({
            element: document.querySelector("#chart3"),
            width: 580,
            height: 250,
            series: [
                {
                    color: 'steelblue',
                    data: data3,
                    name: 'Temperature'
                }
            ]
        });

        var axes3 = new Rickshaw.Graph.Axis.Time({ graph: graph3 });
        var yAxis3 = new Rickshaw.Graph.Axis.Y({ graph: graph3 });
        var hoverDetail3 = new Rickshaw.Graph.HoverDetail( { graph: graph3 } );

        graph3.render();
    </script>
</body>
</html>
